<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Tidy and Return a Data Frame of <acronym>GSOD</acronym> Weather from Local Data — reformat_GSOD • GSODR</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Tidy and Return a Data Frame of <acronym>GSOD</acronym> Weather from Local Data — reformat_GSOD" />

<meta property="og:description" content="This function automates cleaning and reformatting of GSOD station
files in &quot;WMO-WBAN-YYYY.op.gz&quot; format that have been downloaded from the
United States National Center for Environmental Information's
(NCEI) FTP server. Three new elements; saturation vapour
pressure (es), actual vapour pressure (ea) and relative humidity are
calculated and returned in the final data as well.  All units are converted
to International System of Units (SI), e.g. Fahrenheit to Celsius and
inches to millimetres.  Alternative elevation measurements are supplied for
missing values or values found to be questionable based on the Consultative
Group for International Agricultural Research's Consortium for Spatial
Information group's (CGIAR-CSI) Shuttle Radar Topography Mission 90
metre (SRTM 90m) digital elevation data based on NASA's
original SRTM 90m data." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">GSODR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/GSODR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Working_with_spatial_and_climate_data.html">Working with spatial and climate data from GSODR and GSODRdata</a>
    </li>
    <li>
      <a href="../articles/use_case_1.html">GSODR use case: Finding specific stations using spatial queries</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/GSODR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Tidy and Return a Data Frame of <acronym>GSOD</acronym> Weather from Local Data</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/GSODR/blob/master/R/reformat_GSOD.R'><code>R/reformat_GSOD.R</code></a></small>
    <div class="hidden name"><code>reformat_GSOD.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function automates cleaning and reformatting of <acronym>GSOD</acronym> station
files in<br /> "WMO-WBAN-YYYY.op.gz" format that have been downloaded from the
United States National Center for Environmental Information's
(<acronym>NCEI</acronym>) <acronym>FTP</acronym> server. Three new elements; saturation vapour
pressure (es), actual vapour pressure (ea) and relative humidity are
calculated and returned in the final data as well.  All units are converted
to International System of Units (SI), <em>e.g.</em> Fahrenheit to Celsius and
inches to millimetres.  Alternative elevation measurements are supplied for
missing values or values found to be questionable based on the Consultative
Group for International Agricultural Research's Consortium for Spatial
Information group's (<acronym>CGIAR-CSI</acronym>) Shuttle Radar Topography Mission 90
metre (<acronym>SRTM</acronym> 90m) digital elevation data based on <acronym>NASA</acronym>'s
original <acronym>SRTM</acronym> 90m data.</p>
    
    </div>

    <pre class="usage"><span class='fu'>reformat_GSOD</span>(<span class='kw'>dsn</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>file_list</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dsn</th>
      <td><p>User supplied file path to location of data files on local disk
for tidying.</p></td>
    </tr>
    <tr>
      <th>file_list</th>
      <td><p>User supplied list of files of data on local disk for
tidying.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame as a <code><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></code> object of weather
data.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Parallel processing can be enabled using <code><a href='https://www.rdocumentation.org/packages/future/topics/plan'>plan</a></code> to set
up a parallel backend of your choice, e.g.,
<code><a href='https://www.rdocumentation.org/packages/future/topics/plan'>future::plan("multisession")</a></code>.  See examples for more.</p>
<p>If multiple stations are given, data are summarised for each year by station,
which include vapour pressure and relative humidity elements calculated from
existing data in <acronym>GSOD</acronym>. Else, single stations are tidied and a data
frame is returned.</p>
<p>All missing values in resulting files are represented as <code>NA</code> regardless
of which field they occur in.</p>
<p>Only station files in the original ".op.gz" file format are supported by this
function.  If you have downloaded the full annual "gsod_YYYY.tar" file you
will need to extract the individual station files from the tar file first to
use this function.</p>
<p>For a complete list of the fields and description of the contents and units,
please refer to Appendix 1 in the <span class="pkg">GSODR</span> vignette,
<code><a href='../articles/GSODR.html'>vignette("GSODR", package = "GSODR")</a></code>.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>While <span class="pkg">GSODR</span> does not distribute <acronym>GSOD</acronym> weather data,
users of the data should note the conditions that the U.S. <acronym>NCEI</acronym>
places upon the <acronym>GSOD</acronym> data.
&#8220;The following data and products may have conditions placed on
their international commercial use.  They can be used within the U.S. or for
non-commercial international activities without restriction. The non-U.S.
data cannot be redistributed for commercial purposes. Re-distribution of
these data by others must provide this same notification.&#8221;</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Jarvis, A., Reuter, H.I, Nelson, A., Guevara, E. (2008)
Hole-filled SRTM for the globe Version 4, available from the CGIAR-CSI SRTM
90m Database <a href='http://srtm.csi.cgiar.org'>http://srtm.csi.cgiar.org</a></p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>For automated downloading and tidying see the <code><a href='get_GSOD.html'>get_GSOD</a></code>
function which provides expanded functionality for automatically downloading
and expanding annual <acronym>GSOD</acronym> files and cleaning station files.</p>
<p><code><a href='get_GSOD.html'>get_GSOD</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'># Download data to 'tempdir()'</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/download.file'>download.file</a></span>(<span class='kw'>url</span> <span class='kw'>=</span>
  <span class='st'>"ftp://ftp.ncdc.noaa.gov/pub/data/gsod/2010/955510-99999-2010.op.gz"</span>,
        <span class='kw'>destfile</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/file.path'>file.path</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/tempfile'>tempdir</a></span>(), <span class='st'>"955510-99999-2010.op.gz"</span>),
        <span class='kw'>mode</span> <span class='kw'>=</span> <span class='st'>"wb"</span>)

<span class='co'># Reformat station data files in R's tempdir() directory</span>
<span class='no'>tbar</span> <span class='kw'>&lt;-</span> <span class='fu'>reformat_GSOD</span>(<span class='kw'>dsn</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/tempfile'>tempdir</a></span>())

<span class='no'>tbar</span>
<span class='co'># }</span># NOT RUN {
# }
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Adam H Sparks, <a href='mailto:adamhsparks@gmail.com'>adamhsparks@gmail.com</a></p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Adam Sparks, Tomislav Hengl, Andrew Nelson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

